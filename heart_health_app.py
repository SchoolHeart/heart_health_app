import streamlit as st

# Ερωτήσεις και επιλογές
questions = [
    ("Ηλικία:", "entry"),
    ("Βάρος (kg):", "entry"),
    ("Ύψος (m):", "entry"),
    ("Φύλο:", "choices", ["Άνδρας", "Γυναίκα"]),  # Εδώ αφαιρέσαμε την επιλογή "Άλλο"
    ("Έχετε οικογενειακό ιστορικό καρδιοαγγειακών παθήσεων;", "choices", ["Όχι", "Ναι"]),
    ("Αν ναι, ποιο μέλος της οικογένειας και πότε εκδηλώθηκε;", "entry"),
    ("Πάσχετε από κάποια από τις παρακάτω καταστάσεις;", "choices", ["Όχι", "Υπέρταση", "Διαβήτης", "Χαμηλή ή υψηλή χοληστερόλη"]),
    ("Ποιες είναι οι συνήθειες του καρδιακού σας ρυθμού;", "choices", ["Κανονικός", "Εξαιρετικά αργός", "Εξαιρετικά γρήγορος", "Ακανόνιστος"]),
    ("Καταναλώνετε αλκοόλ;", "choices", ["Όχι", "Ναι"]),
    ("Ποιες από τις παρακάτω περιγραφές ταιριάζει καλύτερα με το επαγγελματικό σας περιβάλλον;", "choices", ["Εργάζομαι σε γραφείο (κυρίως καθιστός)", "Εργάζομαι σε φυσική εργασία", "Εργάζομαι σε συνδυασμό καθιστικής και σωματικής δραστηριότητας"]),
    ("Πόσο συχνά αντιμετωπίζετε άγχος ή πίεση στην καθημερινή σας ζωή;", "choices", ["Σπάνια", "Μερικές φορές", "Συχνά"]),
    ("Ζείτε μόνοι σας;", "choices", ["Όχι", "Ναι"]),
    ("Πόσο συχνά καταναλώνετε φρούτα και λαχανικά;", "choices", ["Καθημερινά", "2-3 φορές την εβδομάδα", "Σπάνια", "Ποτέ"]),
    ("Πόσο συχνά καταναλώνετε αλμυρά και επεξεργασμένα τρόφιμα;", "choices", ["Καθημερινά", "2-3 φορές την εβδομάδα", "Σπάνια", "Ποτέ"]),
    ("Πόσο συχνά καταναλώνετε τρόφιμα πλούσια σε ζάχαρη ή λιπαρά;", "choices", ["Καθημερινά", "2-3 φορές την εβδομάδα", "Σπάνια", "Ποτέ"]),
    ("Έχετε υψηλή αρτηριακή πίεση;", "choices", ["Όχι", "Μέτρια", "Υψηλή"]),
    ("Έχετε υψηλή χοληστερίνη;", "choices", ["Όχι", "Μέτρια", "Υψηλή"]),
    ("Καπνίζετε;", "choices", ["Όχι", "Λίγο", "Πολύ"]),
    ("Ακολουθείτε ανθυγιεινή διατροφή;", "choices", ["Όχι", "Μερικές φορές", "Συχνά"]),
    ("Ζείτε σε περιοχή με ρύπανση;", "choices", ["Όχι", "Μέτρια", "Υψηλή"]),
    ("Έχετε έκθεση σε θόρυβο;", "choices", ["Όχι", "Μέτρια", "Υψηλή"]),
    ("Αισθάνεστε μοναξιά;", "choices", ["Όχι", "Μερικές φορές", "Συχνά"]),
    ("Αντιμετωπίζετε συναισθηματικές δυσκολίες;", "choices", ["Όχι", "Μερικές φορές", "Συχνά"])
]

st.set_page_config(page_title="Υγεία Καρδιάς", layout="centered")

st.title(" Υπολογισμός Υγείας Καρδιάς")

answers = {}

# Δημιουργία των input fields
for question in questions:
    label, q_type = question[:2]
    
    if q_type == "entry":
        answers[label] = st.text_input(label)
    elif q_type == "choices":
        choices = question[2]
        answers[label] = st.selectbox(label, choices)

# Υπολογισμός υγείας καρδιάς
def calculate_heart_health():
    try:
        age = int(answers["Ηλικία:"])
        weight = float(answers["Βάρος (kg):"])
        height = float(answers["Ύψος (m):"])
        bmi = weight / (height ** 2)

        # Ξεκινάμε με 100% και αφαιρούμε πόντους για παράγοντες κινδύνου
        health_score = 100

        # Αξιολόγηση BMI
        if bmi > 30:
            health_score -= 20  # Παχυσαρκία
        elif bmi > 25:
            health_score -= 10  # Υπέρβαρο

        # Παράγοντες κινδύνου
        risk_factors = {
            "Έχετε οικογενειακό ιστορικό καρδιοαγγειακών παθήσεων;": {"Ναι": 10},
            "Πάσχετε από κάποια από τις παρακάτω καταστάσεις;": {"Υπέρταση": 15, "Διαβήτης": 15, "Χαμηλή ή υψηλή χοληστερόλη": 10},
            "Ποιες είναι οι συνήθειες του καρδιακού σας ρυθμού;": {"Εξαιρετικά αργός": 10, "Εξαιρετικά γρήγορος": 10, "Ακανόνιστος": 15},
            "Καταναλώνετε αλκοόλ;": {"Ναι": 10},
            "Πόσο συχνά αντιμετωπίζετε άγχος ή πίεση στην καθημερινή σας ζωή;": {"Μερικές φορές": 5, "Συχνά": 10},
            "Ζείτε μόνοι σας;": {"Ναι": 5},
            "Πόσο συχνά καταναλώνετε φρούτα και λαχανικά;": {"2-3 φορές την εβδομάδα": -5, "Σπάνια": 10, "Ποτέ": 15},
            "Πόσο συχνά καταναλώνετε αλμυρά και επεξεργασμένα τρόφιμα;": {"Καθημερινά": 15, "2-3 φορές την εβδομάδα": 10, "Σπάνια": 5},
            "Πόσο συχνά καταναλώνετε τρόφιμα πλούσια σε ζάχαρη ή λιπαρά;": {"Καθημερινά": 15, "2-3 φορές την εβδομάδα": 10, "Σπάνια": 5},
            "Έχετε υψηλή αρτηριακή πίεση;": {"Μέτρια": 10, "Υψηλή": 20},
            "Έχετε υψηλή χοληστερίνη;": {"Μέτρια": 10, "Υψηλή": 20},
            "Καπνίζετε;": {"Λίγο": 10, "Πολύ": 20},
            "Ακολουθείτε ανθυγιεινή διατροφή;": {"Μερικές φορές": 10, "Συχνά": 20},
            "Ζείτε σε περιοχή με ρύπανση;": {"Μέτρια": 5, "Υψηλή": 10},
            "Έχετε έκθεση σε θόρυβο;": {"Μέτρια": 5, "Υψηλή": 10},
            "Αισθάνεστε μοναξιά;": {"Μερικές φορές": 5, "Συχνά": 10},
            "Αντιμετωπίζετε συναισθηματικές δυσκολίες;": {"Μερικές φορές": 5, "Συχνά": 10},
        }

        for question, effects in risk_factors.items():
            answer = answers.get(question, "Όχι")
            health_score -= effects.get(answer, 0)

        health_score = max(0, health_score)  # Δεν επιτρέπουμε αρνητικές τιμές

        # Εμφάνιση αποτελεσμάτων
        st.success(f"✅ **ΔΜΣ:** {bmi:.2f}")
        st.success(f"💓 **Ποσοστό υγείας καρδιάς:** {health_score:.2f}%")

        # Συμπεράσματα και προτάσεις
        if health_score >= 91:
            st.success("**Εξαιρετική καρδιακή υγεία!** 🎉")
            st.write("Συμβουλή: Συνεχίστε τις καλές συνήθειές σας! Η καλή διατροφή, η σωματική άσκηση και η ψυχική ηρεμία είναι τα κλειδιά για να διατηρήσετε αυτή την υγεία.")
        elif health_score >= 81:
            st.success("**Πολύ καλή καρδιακή υγεία!** 👍")
            st.write("Συμβουλή: Συνεχίστε τις καλές συνήθειές σας, αλλά προσέξτε τους παράγοντες κινδύνου. Μια ισορροπημένη διατροφή και η τακτική άσκηση θα σας βοηθήσουν να διατηρήσετε αυτή την υγεία.")
        elif health_score >= 71:
            st.info("**Καλή καρδιακή υγεία.** 😊")
            st.write("Συμβουλή: Υπάρχουν μερικοί παράγοντες κινδύνου που μπορείτε να βελτιώσετε. Προσπαθήστε να μειώσετε το άγχος, να τρώτε πιο υγιεινά και να κάνετε τακτική άσκηση.")
        elif health_score >= 61:
            st.warning("**Μέτρια καρδιακή υγεία.** 🤔")
            st.write("Συμβουλή: Υπάρχουν αρκετοί παράγοντες κινδύνου. Συμβουλευτείτε έναν ειδικό για να βελτιώσετε τη διατροφή και τον τρόπο ζωής σας. Η τακτική άσκηση και η μείωση του άγχους είναι σημαντικές.")
        elif health_score >= 51:
            st.warning("**Μέτρια προς κακή καρδιακή υγεία.** 😕")
            st.write("Συμβουλή: Υπάρχουν πολλοί παράγοντες κινδύνου. Συμβουλευτείτε έναν γιατρό και αλλάξτε τον τρόπο ζωής σας. Η διατροφή, η άσκηση και η ψυχική υγεία είναι κρίσιμες.")
        elif health_score >= 40:
            st.error("**Κακή καρδιακή υγεία.** 😟")
            st.write("Συμβουλή: Είναι σημαντικό να λάβετε μέτρα αμέσως. Συμβουλευτείτε έναν γιατρό, αλλάξτε τη διατροφή σας, κάντε άσκηση και προσπαθήστε να μειώσετε το άγχος.")
        else:
            st.error("**Πολύ κακή καρδιακή υγεία.** 🚨")
            st.write("Συμβουλή: Αυτό είναι ένα σοβαρό σήμα κινδύνου. Συμβουλευτείτε έναν γιατρό άμεσα και αλλάξτε ριζικά τον τρόπο ζωής σας. Η διατροφή, η άσκηση και η ψυχική υγεία είναι ζωτικής σημασίας.")

    except ValueError:
        st.error("⚠️ Παρακαλώ εισάγετε έγκυρες αριθμητικές τιμές.")

# Κουμπί υπολογισμού
if st.button("🔍 Υπολογισμός Υγείας Καρδιάς"):
    calculate_heart_health()